<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Tests | Trade2Retire</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/admin-tests.css">
    <link rel="icon" type="image/png" href="assets/T2Rlogo.png">
</head>
<body>
    <div class="app-container">
        <nav class="main-nav">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="nav-brand">
                <i class="fas fa-graduation-cap brand-icon"></i>
                <a href="index.html" class="brand-link">Trade2Retire</a>
            </div>
            <div class="nav-links">
                <div id="adminMenu" class="user-dropdown">
                    <button class="user-btn">
                        <img src="assets/default-avatar.jpg" alt="Admin" class="user-avatar" id="adminAvatar">
                        <span id="adminNameDisplay">Admin</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a href="admin-dashboard.htm" class="dropdown-item"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
                        <a href="#" class="dropdown-item" id="adminLogoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </nav>

        <div class="admin-toolbar">
            <div class="toolbar-links">
                <a href="admin-dashboard.htm" class="toolbar-link">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
                <a href="admin-courses.htm" class="toolbar-link">
                    <i class="fas fa-book-open"></i>
                    <span>Courses</span>
                </a>
                <a href="admin-videos.htm" class="toolbar-link">
                    <i class="fas fa-video"></i>
                    <span>Videos</span>
                </a>
                <a href="admin-students.htm" class="toolbar-link">
                    <i class="fas fa-users"></i>
                    <span>Students</span>
                </a>
                <a href="admin-tests.htm" class="toolbar-link active">
                    <i class="fas fa-clipboard-check"></i>
                    <span>Tests & Quizzes</span>
                </a>
            </div>
            <div class="toolbar-actions">
                <button class="btn btn-outline btn-sm">
                    <i class="fas fa-question-circle"></i>
                    <span>Help</span>
                </button>
            </div>
        </div>

        <main class="admin-content">
            <div class="sidebar">
                <div class="sidebar-header">
                    <div class="admin-info">
                        <img src="assets/default-avatar.jpg" alt="Admin" class="admin-avatar" id="sidebarAdminAvatar">
                        <h3 id="sidebarAdminName">Admin</h3>
                        <p>Administrator</p>
                    </div>
                </div>
                <div class="sidebar-menu">
                    <a href="admin-dashboard.htm" class="sidebar-link">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="admin-courses.htm" class="sidebar-link">
                        <i class="fas fa-book-open"></i>
                        <span>Courses</span>
                    </a>
                    <a href="admin-videos.htm" class="sidebar-link">
                        <i class="fas fa-video"></i>
                        <span>Video Content</span>
                    </a>
                    <a href="admin-students.htm" class="sidebar-link">
                        <i class="fas fa-users"></i>
                        <span>Students</span>
                    </a>
                    <a href="admin-tests.htm" class="sidebar-link active">
                        <i class="fas fa-clipboard-check"></i>
                        <span>Tests & Quizzes</span>
                    </a>
                    <a href="admin-messages.htm" class="sidebar-link">
                        <i class="fas fa-comments"></i>
                        <span>Messages</span>
                    </a>
                    <a href="admin-settings.htm" class="sidebar-link">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </div>
            </div>

            <div class="main-content">
                <div class="content-header">
                    <h1>Manage Tests & Quizzes</h1>
                    <button class="btn btn-primary" id="addTestBtn">
                        <i class="fas fa-plus"></i> Create New Test
                    </button>
                </div>

                <div class="search-filter">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search tests..." id="testSearch">
                    </div>
                    <div class="filter-group">
                        <select class="category-filter" id="testCategoryFilter">
                            <option value="all">All Categories</option>
                            <option value="CRT">CRT</option>
                            <option value="Psychology">Psychology of Trading</option>
                        </select>
                        <select class="status-filter" id="testStatusFilter">
                            <option value="all">All Statuses</option>
                            <option value="active">Active</option>
                            <option value="draft">Draft</option>
                            <option value="expired">Expired</option>
                        </select>
                    </div>
                </div>

                <div class="table-container">
                    <div class="table-responsive">
                        <table class="tests-table">
                            <thead>
                                <tr>
                                    <th>Test Name</th>
                                    <th>Course</th>
                                    <th>Questions</th>
                                    <th>Duration</th>
                                    <th>Due Date</th>
                                    <th>Status</th>
                                    <th>Submissions</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="testsTableBody">
                                <tr>
                                    <td>CRT Midterm Exam</td>
                                    <td>CRT Masterclass</td>
                                    <td>20</td>
                                    <td>60 mins</td>
                                    <td>2023-12-15</td>
                                    <td><span class="badge badge-green">Active</span></td>
                                    <td class="submissions-cell" data-testid="1" style="cursor: pointer;">15</td>
                                    <td>
                                        <button class="btn-icon edit-btn" data-id="1"><i class="fas fa-edit"></i></button>
                                        <button class="btn-icon questions-btn" data-id="1"><i class="fas fa-question-circle"></i></button>
                                        <button class="btn-icon results-btn" data-id="1"><i class="fas fa-chart-bar"></i></button>
                                        <button class="btn-icon delete-btn" data-id="1"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Psychology Final</td>
                                    <td>Psychology of Trading</td>
                                    <td>25</td>
                                    <td>45 mins</td>
                                    <td>2023-12-20</td>
                                    <td><span class="badge badge-green">Active</span></td>
                                    <td class="submissions-cell" data-testid="2" style="cursor: pointer;">8</td>
                                    <td>
                                        <button class="btn-icon edit-btn" data-id="2"><i class="fas fa-edit"></i></button>
                                        <button class="btn-icon questions-btn" data-id="2"><i class="fas fa-question-circle"></i></button>
                                        <button class="btn-icon results-btn" data-id="2"><i class="fas fa-chart-bar"></i></button>
                                        <button class="btn-icon delete-btn" data-id="2"><i class="fas fa-trash"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="table-footer">
                        <div class="table-info">
                            Showing 1 to 2 of 2 tests
                        </div>
                        <div class="pagination">
                            <button class="btn btn-outline" disabled><i class="fas fa-chevron-left"></i></button>
                            <button class="btn btn-outline active">1</button>
                            <button class="btn btn-outline"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Add Test Modal -->
        <div class="modal" id="addTestModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Create New Test</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addTestForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="testTitle">Test Title</label>
                                <input type="text" id="testTitle" required>
                            </div>
                            <div class="form-group">
                                <label for="testCourse">Course</label>
                                <select id="testCourse" required>
                                    <option value="">Select Course</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="testDuration">Duration (minutes)</label>
                                <input type="number" id="testDuration" min="1" value="30" required>
                            </div>
                            <div class="form-group">
                                <label for="testPassingScore">Passing Score (%)</label>
                                <input type="number" id="testPassingScore" min="1" max="100" value="70" required>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label for="testDueDate">Due Date</label>
                                <input type="datetime-local" id="testDueDate" required>
                            </div>
                            <div class="form-group">
                                <label for="testStatus">Status</label>
                                <select id="testStatus" required>
                                    <option value="active">Active</option>
                                    <option value="draft">Draft</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="testDescription">Description</label>
                            <textarea id="testDescription" rows="3"></textarea>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline cancel-btn">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Test</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Add Question Modal -->
        <div class="modal" id="addQuestionModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Add Question</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addQuestionForm">
                        <div class="form-group">
                            <label for="questionText">Question Text</label>
                            <textarea id="questionText" rows="3" required></textarea>
                        </div>

                        <div class="form-group">
                            <label>Options (Mark correct answer)</label>
                            <div id="optionsContainer">
                                <div class="option-item">
                                    <input type="radio" name="correctOption" value="0" class="correct-option" required>
                                    <input type="text" class="option-text" placeholder="Option 1" required>
                                </div>
                                <div class="option-item">
                                    <input type="radio" name="correctOption" value="1">
                                    <input type="text" class="option-text" placeholder="Option 2" required>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline btn-sm" id="addOptionBtn">
                                <i class="fas fa-plus"></i> Add Option
                            </button>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-outline cancel-btn">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save Question</button>
                        </div>
                    </form>
                    <div id="questionsList"></div>
                </div>
            </div>
        </div>

        <!-- Student Results Modal -->
        <div class="modal" id="studentResultsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Student Results for <span id="resultsTestTitle"></span></h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="student-results-table">
                            <thead>
                                <tr>
                                    <th>Student Name</th>
                                    <th>Email</th>
                                    <th>Score</th>
                                    <th>Status</th>
                                    <th>Date Submitted</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="studentResultsBody">
                                <tr>
                                    <td>John Doe</td>
                                    <td>john@example.com</td>
                                    <td>85%</td>
                                    <td><span class="badge badge-green">Passed</span></td>
                                    <td>2023-11-15 14:30</td>
                                    <td>
                                        <button class="btn-icon view-details-btn">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal" id="deleteTestModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Confirm Deletion</h3>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this test? This action cannot be undone.</p>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline cancel-btn">Cancel</button>
                        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete Test</button>
                    </div>
                </div>
            </div>
        </div>

        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-brand">
                    <i class="fas fa-graduation-cap brand-icon"></i>
                    <span>Trade2Retire</span>
                </div>
                <div class="footer-links">
                    <div class="link-group">
                        <h4>Company</h4>
                        <a href="https://trade2retire.org/about/">About</a>
                        <a href="https://trade2retire.org/disclaimer/">Disclaimer</a>
                        <a href="https://wa.me/+2349161419928">Contact</a>
                    </div>
                    <div class="link-group">
                        <h4>Support</h4>
                        <a href="https://wa.me/2348067056395" target="_blank">Help Center</a>
                        <a href="faq.htm">FAQ</a>
                        <a href="https://chat.whatsapp.com/GhYt7VgvVfBFYwyvecnIlj?mode=ac_c" target="_blank">Community</a>
                    </div>
                </div>
                <div class="footer-bottom">
                    <p>&copy; 2025 Trade2Retire. All rights reserved.</p>
                    <div class="social-links">
                        <a href="https://x.com/Trade2Retire_"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/Trade2Retire"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                        <a href="https://www.instagram.com/trade2retire_"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="js/admin-auth-state.js"></script>
    <script src="js/admin-tests.js"></script>
</body>
</html>